## æŠ½è±¡ç±»å‹

åœ¨å°† Stack ä»ç”¨ä¸€ä¸ªæ¨¡å—å®ç°çš„â€œå‡ç±»å‹â€è½¬å˜ä¸ºä¸€ä¸ªçœŸæ­£çš„ç±»å‹çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸€ä¸ªæ€§è´¨è¢«ä¸¢æ‰äº†ï¼šè¡¨ç¤ºæ–¹å¼æ²¡æœ‰ä¸ç”¨æˆ·ç•Œé¢åˆ†ç¦»ï¼Œåè€Œå˜æˆäº†ä½¿ç”¨ Stack çš„ç¨‹åºç‰‡æ®µé‡Œå°†è¦åŒ…å«çš„ä¸€ä¸ªéƒ¨åˆ†ã€‚è¿™ä¸ªè¡¨ç¤ºå®Œå…¨æ˜¯ç§ç”¨çš„ï¼Œå› æ­¤åªèƒ½é€šè¿‡æˆå‘˜å‡½æ•°è®¿é—®ï¼Œç„¶è€Œå®ƒå´å‡ºç°åœ¨é‚£é‡Œã€‚å¦‚æœè¿™ä¸ªè¡¨ç¤ºæœ‰äº†æŸç§æ˜¾è‘—å˜åŒ–ï¼Œé‚£äº›ä½¿ç”¨å®ƒçš„ä»£ç å°±å¿…é¡»é‡æ–°ç¼–è¯‘ã€‚è¿™æ˜¯ä¸ºåšå‡ºåœ¨è¡Œä¸ºæ–¹å¼ä¸Šå®Œå…¨åƒå†…éƒ¨ç±»å‹çš„å…·ä½“ç±»å‹æ—¶æ‰€ä»˜å‡ºçš„ä¸€ä¸ªä»£ä»·ã€‚ç‰¹åˆ«å› ä¸ºåœ¨ä¸çŸ¥é“ä¸€ä¸ªç±»å‹è¡¨ç¤ºçš„å¤§å°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°±æ— æ³•è·å¾—è¿™ä¸ªç±»å‹çš„çœŸæ­£çš„å±€éƒ¨å˜é‡ã€‚

åœ¨ç±»å‹ä¸å¸¸æ”¹å˜ï¼Œè€Œä¸”å±€éƒ¨å˜é‡åˆç¡®å®æä¾›äº†æˆ‘ä»¬æéœ€è¦çš„æ¸…æ™°æ€§å’Œæ•ˆç‡çš„é‚£äº›åœ°æ–¹ï¼Œè¿™ç§æ–¹å¼æ˜¯å®Œå…¨å¯ä»¥æ¥å—çš„ï¼Œä¹Ÿæ˜¯å¾ˆç†æƒ³çš„ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦å°†å †æ ˆçš„ç”¨æˆ·ä¸å †æ ˆè¡¨ç¤ºçš„ä¿®æ”¹å®Œå…¨éš”ç¦»å¼€ï¼Œå‰é¢çš„è¿™ä¸ªStackå°±ä¸å¤Ÿå¥½äº†ã€‚é’ˆå¯¹è¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ¡ˆèƒ½å¾—åˆ°ç•Œé¢ä¸è¡¨ç¤ºçš„å®Œå…¨åˆ†ç¦»ï¼Œè¿™æ—¶éœ€è¦æ”¾å¼ƒçš„å°±æ˜¯çœŸæ­£çš„å±€éƒ¨å˜é‡ã€‚

æˆ‘ä»¬é¦–å…ˆå®šä¹‰ç•Œé¢ï¼š

```javascript
    class Stack
    {
    public:
        class Underflow{};    // ç”¨äºå¼‚å¸¸
        class Overflow{};     // ç”¨äºå¼‚å¸¸

        virtual void push(char c) = 0;
        virtual char pop() = 0;
    };
```

è¯è¯­ `virtual` åœ¨ Simula å’Œ C++ é‡Œçš„æ„æ€æ˜¯â€œå¯ä»¥åœ¨ä»Šåç”±è¿™ä¸ªç±»æ‰€æ´¾ç”Ÿçš„ç±»é‡Œé‡æ–°å®šä¹‰â€ã€‚ç”± Stack æ´¾ç”Ÿå‡ºçš„ä¸€ä¸ªç±»å°†æä¾›è¿™ä¸ª Stack ç•Œé¢çš„ä¸€ä¸ªå…·ä½“å®ç°ã€‚æœ‰äº›å¤æ€ª `=0` è¯­æ³•å½¢å¼è¯´æ˜åœ¨ç”± Stack æ´¾ç”Ÿçš„æŸäº›ç±»ä¸­å¿…é¡»å®šä¹‰è¿™äº›å‡½æ•°ã€‚è¿™æ ·ï¼Œè¿™ä¸ª Stack å°±èƒ½ä½œå‡ºä»»ä½•å®ç° `push()` å’Œ `pop()` çš„ç±»çš„ç•Œé¢äº†ã€‚

è¯¥ Stack ä»¥å¦‚ä¸‹æ–¹å¼ä½¿ç”¨ï¼š

```javascript
    void f(Stack& s_ref)
    {
        s_ref.push('c');
        if(s_ref.pop() != 'c') throw Bad_pop();
    }
```

è¯·æ³¨æ„ `f()` å¦‚ä½•ä½¿ç”¨ç€Stackç•Œé¢ï¼Œè€Œå®Œå…¨å¿½ç•¥äº†å®ç°çš„ç»†èŠ‚ã€‚ä¸ºå¦å¤–ä¸€äº›ä¸åŒçš„ç±»æä¾›ç•Œé¢çš„ç±»ä¹Ÿå¸¸å¸¸è¢«ç§°åš`å¤šæ€ç±»å‹`ã€‚

æ¯«ä¸å¥‡æ€ªï¼Œæœ‰å…³å®ç°çš„æ‰€æœ‰ä¸œè¥¿éƒ½å¯ä»¥ä¸å‰é¢é‚£ä¸ªå…·ä½“ Stack ç±»å®Œå…¨ä¸€æ ·ï¼Œæˆ‘ä»¬å°±æ˜¯ä»é‚£é‡Œæå–å‡ºäº†ç•Œé¢ Stackï¼š

```javascript
    class Array_stack : public Stack {
        char* p;
        int max_size;
        int top;
    public:
        Array_stack(int s);
        ~Array_stack();

        void push(char c);
        char pop();
    };
```

å¼€å§‹å¤„çš„ â€œ`:public`â€ å¯ä»¥è¯»ä½œâ€œç”±å…¶æ´¾ç”Ÿâ€ï¼Œâ€œå®ç°â€æˆ–è€…â€œæ˜¯å®ƒçš„å­ç±»å‹â€ã€‚

å¯¹äºåƒ `f()` è¿™æ ·çš„ä½¿ç”¨ç€ Stackï¼Œä½†å´å®Œå…¨ä¸ç®¡å…¶å®ç°ç»†èŠ‚çš„å‡½æ•°ï¼Œéœ€è¦æœ‰å¦å¤–çš„å‡½æ•°å»ä¸ºå®ƒåˆ›å»ºå¯¹è±¡ï¼Œä½¿ `f()` ä¸€ç±»çš„å‡½æ•°å¯ä»¥åœ¨è¿™äº›å¯¹è±¡ä¸Šæ“ä½œã€‚ä¾‹å¦‚ï¼Œ

```javascript
    void g()
    {
        Array_stack as(200);
        f(as);
    }
```

å› ä¸º `f()` æ ¹æœ¬ä¸çŸ¥é“ Array\_stackï¼ŒåªçŸ¥é“ Stack ç•Œé¢ï¼Œå®ƒåœ¨ Stack çš„å¦ä¸€ä¸ªä¸åŒå®ç°ä¸Šå·¥ä½œèµ·æ¥ä¹ŸåŒæ ·å¥½ã€‚ä¾‹å¦‚ï¼Œ

```javascript
    class List_stack : public Stack {    // List_stack å®ç°Stack
        list<char> lc;                   // ï¼ˆæ ‡å‡†åº“ï¼‰å­—ç¬¦çš„è¡¨
    public:
        List_stack() { }
        void push(char c) { lc.push_front(c); }
        char pop();
    };

    char List_stack::pop()
    {
        char x = lc.front();    // å–å¾—ç¬¬ä¸€ä¸ªå…ƒç´ 
        lc.pop_front();         // åˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´ 
        return x;
    }
```

åœ¨è¿™é‡Œï¼Œå…·ä½“è¡¨ç¤ºé‡‡ç”¨äº†ä¸€ä¸ªå­—ç¬¦çš„è¡¨ã€‚`lc.push_front(c)` å°† `c` æ·»åŠ ä¸º `lc` çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œè°ƒç”¨ `lc.pop_front()` åˆ é™¤ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œè€Œ `lc.front()` è¡¨ç¤º `lc` çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚

ä¸‹é¢å‡½æ•°å»ºç«‹èµ·ä¸€ä¸ª List\_stackï¼Œå¹¶è®© `f()` å»ä½¿ç”¨å®ƒï¼š

```javascript
    void h()
    {
        List_stack ls;
        f(ls);
    }
```

---

**ä»£ç **ï¼ˆedit by shenjunï¼‰:

```javascript
    #include <list>

    class Stack
    {
    public:
        /*class Underflow{};
        class Overflow{};*/

        virtual void push(char c) = 0;     // çº¯è™šï¼ˆæŠ½è±¡ï¼‰å‡½æ•°
        virtual char pop() = 0;            // çº¯è™šï¼ˆæŠ½è±¡ï¼‰å‡½æ•°
        virtual void show() = 0;           // çº¯è™šï¼ˆæŠ½è±¡ï¼‰å‡½æ•°
    };

    class Bad_pop{ /* å®ç° ç”¨åšå¼‚å¸¸ */ };
    class Bad_push { /* å®ç° ç”¨åšå¼‚å¸¸ */ };
    //class Underflow{ /* å®ç° ç”¨åšå¼‚å¸¸ */ };
    //class Overflow{ /* å®ç° ç”¨åšå¼‚å¸¸ */ };

    void f(Stack& s_ref)
    {
        /*s_ref.push('c');
        if (s_ref.pop() != 'c') throw Bad_pop();*/

        //char name[] {"shenjun"};        // Cé£æ ¼å­—ç¬¦ä¸²åˆå§‹åŒ–
        char name[] = "shenjun";
        for (char* p = name; *p != 0; p++)
        {
            s_ref.push(*p);
        }
        s_ref.show();

        /*for (size_t i = 0; i < 7; i++)
        {
            printf("%c", s_ref.pop());
        }
        printf("\n");*/
    }

    class Array_stack : public Stack {

        char* p;
        int max_size;
        int top;

    public:
        Array_stack(int s);
        ~Array_stack();

        void push(char c);
        char pop();
        void show();
    };

    Array_stack::Array_stack(int s)
    {
        max_size = s;
        p = new char[s];
        top = 0;
        p[0] = 0;
    }

    Array_stack::~Array_stack()
    {
        top = 0;
        delete [] p;
    }

    void Array_stack::push(char c)
    {
        if (top == max_size) throw Bad_push();

        p[top] = c;
        ++top;
        p[top] = 0;
    }

    char Array_stack::pop()
    {
        if (top == 0) throw Bad_pop();

        --top;
        char c = p[top];
        p[top] = 0;
        return c;
    }

    void Array_stack::show()
    {
        for (size_t i = 0; i < top; i++)
        {
            printf("%c", p[i]);
        }
        printf("\n");
    }

    void g()
    {
        Array_stack as(200);
        f(as);
    }

    class List_stack : public Stack {
        std::list<char> lc;                           // #include <list>

    public:
        List_stack(){}
        void push(char c) { lc.push_back(c); }        // lc.push_begin(c);
        char pop();
        void show();
    };

    char List_stack::pop()
    {
        char x = lc.front();           // å–å¾—ç¬¬ä¸€ä¸ªå…ƒç´ 
        lc.pop_front();                // åˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´ 
        return x;
    }

    void List_stack::show()
    {
        //typedef std::list<char>::iterator it;
        typedef std::list<char>::const_iterator it;
        for (it i = lc.begin(); i != lc.end(); i++)
        {
            printf("%c", *i);
        }
        printf("\n");
    }

    void h()
    {
        List_stack ls;
        f(ls);
    }
```

ğŸ”š

