##模块化和界面

&emsp;&emsp;任何实际程序都是由一些部分组成的。例如，甚至最简单的“Hello,world!”程序也涉及到至少两个部分：用户代码要求将Hello,world!打印出来，I/O系统完成打印工作。


&emsp;&emsp;考虑6.1节的桌面计算器，可以将它看做是由5个部分组成：

    1)、一个分析器，完成语法的分析。
    2)、一个词法处理器，由字符组合出单词。
    3)、一个符号表，保存字符串和值的对偶。
    4)、一个驱动程序main()。
    5)、一个错误处理器。
    
有关情况可以用如下图形所示：

![](/assets/8_1.png)

这里的箭头表示“使用”。为了简化这个图。我没有表示出每个部分都依赖于错误处理的这一事实。实际上，可以将这个计算器设想为由三个部分组成，加上驱动程序和错误处理器只是为了安全。


&emsp;&emsp;当一个模块使用另一个模块时，它并不需要知道有关被用模块的所有东西。理想的情况是，一个模块的大部分细节都不为其使用者所知。为此，我们就需要将一个模块和它的界面区分开来。举例来说，分析器直接依赖于词法处理器的界面（仅此而已），并不依赖于整个词法处理器。该词法处理器不过是实现了它的界面所声言的那些服务。这些情况可以用下面图形表示：

![](/assets/8_1_02.png)

虚线箭头表示实现。我认为这才是该程序的实际结构，而我们作为程序员的工作就是在代码里忠实地表达这些东西。如果真的做到了这些，那么结果代码就会是简单的、高效的、易理解的、可维护的，如此等等，因为它是我们的基本设计的直接反映。


&emsp;&emsp;