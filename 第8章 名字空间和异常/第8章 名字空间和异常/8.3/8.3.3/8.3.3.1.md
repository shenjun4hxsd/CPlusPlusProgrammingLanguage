##å…¶ä»–é”™è¯¯å¤„ç†ç­–ç•¥

&emsp;&emsp;åŸæ¥çš„é”™è¯¯å¤„ç†ä»£ç æ¯”é‡‡ç”¨å¼‚å¸¸ä¹‹åçš„ä»£ç æ›´çŸ­ï¼Œä¹Ÿæ›´ä¼˜ç¾ã€‚ä½†é‚£å´æ˜¯é€šè¿‡ç¨‹åºå„éƒ¨åˆ†ä¹‹é—´çš„ç´§å¯†è€¦åˆè€Œå¾—åˆ°çš„ã€‚é‚£ç§æ–¹å¼ä¸èƒ½å¾ˆå¥½åœ°ç”¨åˆ°ç”±åˆ†åˆ«å¼€å‘çš„åº“ç»„åˆè€Œæˆçš„ç¨‹åºä¸­ã€‚

&emsp;&emsp;æˆ‘ä»¬ä¹Ÿå¯ä»¥è€ƒè™‘å»æ‰ä¸“é—¨çš„é”™è¯¯å¤„ç†å‡½æ•°skip()ï¼Œæ–¹å¼æ˜¯åœ¨main()é‡Œå¼•è¿›ä¸€ä¸ªçŠ¶æ€å˜é‡ã€‚ä¾‹å¦‚ï¼Œ

```javascript
    int main(int argc, char* argv[])        // ç³Ÿç³•é£æ ¼çš„ä¾‹å­
    {
        // ...
        bool in_error = false;
        while(*Driver::input) {
            try {
                Lexer::get_token();
                if(Lexer::curr_tok == Lexer::END) break;
                if(Lexer::curr_tok == Lexer::PRINT) {
                    in_error = false;
                    continue;
                }
                if(in_error == false) cout << Parser::expr(false) << '\n';
            }
            catch (Error::Zero_divide) {
                cerr << "attempt to divide by zero\n";
                in_error = true;
            }
            catch (Error::Syntax_error e) {
                cerr << "syntax error: " << e.p << '\n';
                in_error = true;
            }
        }
        if(Driver::input != &std::cin) delete Driver::input;
        return Driver::no_of_errors;
    }
```

æˆ‘è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªå¾ˆåçš„åŠæ³•ï¼Œå› ä¸ºï¼š

&emsp;&emsp;1)ã€çŠ¶æ€å˜é‡æ˜¯æ··ä¹±å’Œé”™è¯¯çš„ä¸€ä¸ªå¸¸è§æ ¹æºï¼Œç‰¹åˆ«æ˜¯å…è®¸å®ƒä»¬å¤§é‡å‡ºç°å¹¶å½±å“ç¨‹åºä¸­è¾ƒå¤§çš„ç‰‡æ®µæ—¶ã€‚ç‰¹åˆ«åœ°ï¼Œæˆ‘è®¤ä¸ºä½¿ç”¨in_errorçš„main()ç‰ˆæœ¬ä¸å¦‚ä½¿ç”¨skip()çš„ç‰ˆæœ¬å¥½è¯»ã€‚

&emsp;&emsp;2)ã€ä¸€èˆ¬è¯´ï¼Œä½¿å¤„ç†é”™è¯¯çš„ä»£ç ä¸â€œæ­£å¸¸â€ä»£ç åˆ†ç¦»æ˜¯ä¸€ç§å¾ˆå¥½çš„ç­–ç•¥ã€‚

&emsp;&emsp;3)ã€åœ¨å¯¼è‡´é”™è¯¯çš„ä»£ç çš„åŒä¸€ä¸ªæŠ½è±¡å±‚æ¬¡ä¸Šå¤„ç†é”™è¯¯æ˜¯éå¸¸å±é™©çš„ã€‚å®Œæˆé”™è¯¯å¤„ç†çš„ä»£ç æœ‰å¯èƒ½åˆäº§ç”Ÿäº†å¼•èµ·é”™è¯¯å¤„ç†çš„é‚£ä¸ªé”™è¯¯ã€‚æˆ‘æŠŠä¸‹é¢é—®é¢˜ç•™åšç»ƒä¹ ï¼šè¯·è¯´æ˜åœ¨ä½¿ç”¨in_errorçš„main()ç‰ˆæœ¬ä¸­å‘¢æ€ä¹ˆä¼šå‡ºç°è¿™ç§æƒ…å†µï¼ˆ8.5[7]ï¼‰ã€‚

&emsp;&emsp;4)ã€ä¿®æ”¹â€œæ­£å¸¸â€çš„ä»£ç ï¼ŒåŠ ä¸Šé”™è¯¯å¤„ç†ä»£ç ï¼Œæ‰€éœ€çš„å·¥ä½œé‡æ¯”å¢åŠ å•ç‹¬çš„é”™è¯¯å¤„ç†ä¾‹è¡Œç¨‹åºæ›´å¤šã€‚

å¼‚å¸¸å¤„ç†çš„æ„å›¾æ˜¯å»å¤„ç†éå±€éƒ¨çš„é—®é¢˜ã€‚å¦‚æœä¸€ä¸ªé”™è¯¯å¯ä»¥åœ¨å±€éƒ¨å¤„ç†ï¼Œé‚£ä¹ˆï¼ˆå‡ ä¹ï¼‰æ€»åº”è¯¥è¿™æ ·åšã€‚ä¾‹å¦‚ï¼Œå®Œå…¨æ²¡æœ‰å¿…è¦å¯¹â€œè¿‡å¤šå‚æ•°é”™è¯¯â€ä½¿ç”¨å¼‚å¸¸æœºåˆ¶ï¼š

```javascript
    int main(int argc, char* argv[])
    {
        using namespace std;
        using namespace Driver;
        
        switch (argc) {
        case 1:
            input = &cin;
            break;
        case 2:
            input = new istringstream(argv[1]);
            break;
        default:
            cerr << "too many arguments\n";
            return 1;
        }
        
        // å¦‚å‰
    }
```

ç¬¬14ç« å°†è¿›ä¸€æ­¥è®¨è®ºæœ‰å…³å¼‚å¸¸çš„é—®é¢˜ã€‚


ğŸ”š



