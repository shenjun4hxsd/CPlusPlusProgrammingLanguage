##æŠ›å‡ºå’Œæ•æ‰

&emsp;&emsp;æä¾›å¼‚å¸¸è¿™ä¸ªæ¦‚å¿µå°±æ˜¯ä¸ºäº†å¸®åŠ©å¤„ç†é”™è¯¯çš„æŠ¥å‘Šã€‚ä¾‹å¦‚ï¼Œ

```javascript
    struct Range_error {
        int i;
        Range_error(int ii) { i = ii; }        // æ„é€ å‡½æ•°ï¼ˆ2.5.2èŠ‚ã€10.2.3èŠ‚ï¼‰
    };
    
    char to_char(int i)
    {
        if(i < numeric_limits<char>::min || numeric_limits<char>::max < i) // åƒçœ‹22.2èŠ‚
            throw Range_error(i);
        return i;
    }
```

å‡½æ•°to_char()æˆ–è€…è¿”å›å…·æœ‰æ•°å€¼içš„charï¼Œæˆ–è€…æŠ›å‡ºä¸€ä¸ªRange_errorã€‚è¿™é‡Œçš„åŸºæœ¬æƒ³æ³•æ˜¯ï¼Œå¦‚æœå‡½æ•°å‘ç°äº†ä¸€ä¸ªè‡ªå·±æ— æ³•å¤„ç†çš„é—®é¢˜ï¼Œå®ƒå°±æŠ›å‡ºï¼ˆthrowï¼‰ä¸€ä¸ªå¼‚å¸¸ï¼Œå¸Œæœ›å®ƒçš„ï¼ˆç›´æ¥æˆ–é—´æ¥ï¼‰è°ƒç”¨è€…èƒ½å¤Ÿå¤„ç†è¿™ä¸ªé—®é¢˜ã€‚å¦‚æœä¸€ä¸ªå‡½æ•°æƒ³å¤„ç†æŸä¸ªé—®é¢˜ï¼Œå®ƒå°±å¯ä»¥è¯´æ˜è‡ªå·±è¦æ•æ‰ï¼ˆcatchï¼‰ç”¨äºæŠ¥å‘Šè¯¥ç§é—®é¢˜çš„å¼‚å¸¸ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæƒ³è°ƒç”¨to_char()å¹¶æ•æ‰å®ƒå¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ï¼Œæˆ‘ä»¬å¯ä»¥å†™

```javascript
    void g(int i)
    {
        try {
            char c = to_char(i);
            // ...
        }
        catch(Range_error) {
            cerr << "oops\n";
        }
    }
```

ç¨‹åºç»“æ„

```javascript
    catch (/* ... */) {
        // ...
    }
```

ç§°ä¸ºä¸€ä¸ªå¼‚å¸¸å¤„ç†å™¨ï¼Œå®ƒçš„ä½¿ç”¨åªèƒ½ç´§æ¥ç€tryå…³é”®å­—ä½œä¸ºå‰ç¼€çš„å—ä¹‹åï¼Œæˆ–è€…ç´§æ¥ç€å¦ä¸€ä¸ªå¼‚å¸¸å¤„ç†å™¨ä¹‹åã€‚catchä¹Ÿæ˜¯ä¸€ä¸ªå…³é”®å­—ã€‚åœ¨æ‹¬å·é‡ŒåŒ…å«ç€ä¸€ä¸ªå£°æ˜ï¼Œå…¶ä½¿ç”¨æ–¹å¼ç±»ä¼¼äºå‡½æ•°å‚æ•°çš„å£°æ˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥å£°æ˜æè¿°çš„æ˜¯è¿™ä¸ªå¤„ç†å™¨è¦æ•æ‰çš„å¯¹è±¡çš„ç±»å‹ï¼Œå¹¶å¯ä»¥ä¸ºæ‰€æ•æ‰çš„å¯¹è±¡å‘½åã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬æƒ³çŸ¥é“æŠ›å‡ºçš„Range_errorçš„å€¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸ºcatchçš„å‚æ•°æä¾›ä¸€ä¸ªåå­—ï¼Œå°±åƒä¸ºå‡½æ•°çš„å‚æ•°å‘½åä¸€æ ·ã€‚ä¾‹å¦‚å†™ï¼š

```javascript
    void h(int i)
    {
        try {
            char c = to_char(i);
            // ...
        }
        catch (Range_error x) {
            cerr << "oops: to_char(" << x.i << "\n)";
        }
    }
```

å¦‚æœåœ¨ä¸€ä¸ªtryå—é‡Œçš„ä»»ä½•ä»£ç ---æˆ–è€…ç”±é‚£é‡Œè°ƒç”¨çš„ä¸œè¥¿---æŠ›å‡ºäº†ä¸€ä¸ªå¼‚å¸¸ï¼Œé‚£å°±ä¼šé€ä¸ªæ£€æŸ¥è¿™ä¸ªtryå—åé¢çš„å¤„ç†å™¨ã€‚å¦‚æœæ‰€æŠ›å‡ºçš„å¼‚å¸¸å±äºæŸä¸ªå¤„ç†å™¨æ‰€æè¿°çš„ç±»å‹ï¼Œè¿™ä¸ªå¤„ç†å™¨å°±ä¼šè¢«æ‰§è¡Œã€‚å¦‚æœtryå—æœªæŠ›å‡ºå¼‚å¸¸ï¼Œè¿™äº›å¼‚å¸¸å¤„ç†å™¨éƒ½å°†è¢«å¿½ç•¥ï¼Œä½¿è¯¥tryå—çš„æ´»åŠ¨æ–¹å¼å°±åƒæ˜¯æ™®é€šçš„å—ã€‚å¦‚æœæŠ›å‡ºäº†ä¸€ä¸ªå¼‚å¸¸ï¼Œè€Œåˆæ²¡æœ‰tryå—æ•æ‰å®ƒï¼Œæ•´ä¸ªç¨‹åºå°±å°†ç»ˆæ­¢ï¼ˆ14.7èŠ‚ï¼‰ã€‚

&emsp;&emsp;ç®€è€Œè¨€ä¹‹ï¼ŒC++å¼‚å¸¸å¤„ç†æ˜¯ä¸€ç§ä»ä¸€ä¸ªå‡½æ•°é‡Œå°†æ§åˆ¶ä¼ é€’åˆ°æœ‰æ„ç¡®å®šçš„ä¸€äº›ä»£ç çš„æ–¹å¼ã€‚å¦‚æœéœ€è¦ï¼Œä¹Ÿå¯ä»¥åŒæ—¶æŠŠæœ‰å…³é”™è¯¯çš„æŸäº›ä¿¡æ¯ä¼ é€’ç»™è°ƒç”¨è€…ã€‚Cç¨‹åºå‘˜å¯ä»¥å°†å¼‚å¸¸å¤„ç†æƒ³è±¡ä¸ºä¸€ç§ç”¨äºå–ä»£setjmp/longjmpï¼ˆ16.1.2èŠ‚ï¼‰çš„ã€å…·æœ‰è‰¯å¥½è¡Œä¸ºæ–¹å¼çš„æœºåˆ¶ã€‚åœ¨å¼‚å¸¸å¤„ç†ä¸ç±»ä¹‹é—´é‡è¦çš„ç›¸äº’ä½œç”¨å°†åœ¨ç¬¬14ç« è®¨è®ºã€‚


ğŸ”š