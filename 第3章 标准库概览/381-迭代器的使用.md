## è¿­ä»£å™¨çš„ä½¿ç”¨

å½“ä½ ç¬¬ä¸€æ¬¡é‡åˆ°æŸä¸ªè¿­ä»£å™¨æ—¶ï¼Œæ€»èƒ½å¾—åˆ°å‡ ä¸ªå¼•ç”¨ç€æœ€æœ‰ç”¨çš„å…ƒç´ çš„è¿­ä»£å™¨ï¼š`begin()` å’Œ `end()` æ˜¯å…¶ä¸­æœ€å¥½çš„ä¾‹å­ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè®¸å¤šç®—æ³•ä¹Ÿå°†è¿”å›è¿­ä»£å™¨ã€‚ä¾‹å¦‚ï¼Œæ ‡å‡†ç®—æ³• `find` åœ¨ä¸€ä¸ªåºåˆ—é‡ŒæŸ¥æ‰¾æŸä¸ªå€¼ï¼Œå¹¶è¿”å›å¼•ç”¨ç€æ‰¾åˆ°çš„é‚£ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚åˆ©ç”¨ `find`ï¼Œæˆ‘ä»¬å¯ä»¥ç»Ÿè®¡å‡ºæŸä¸€å­—ç¬¦åœ¨ä¸€ä¸ª `string` ä¸­å‡ºç°çš„æ¬¡æ•°ï¼š

```javascript
    int count(const string& s, char c)
    {
        int n = 0;
        string::const_iterator i = find(s.begin(), s.end(), c);
        while(i!=s.end())
        {
            ++n;
            i = find(i+1, s.end(), c);
        }
        return n;
    }
```

ç®—æ³• `find` è¿”å›ä¸€ä¸ªå¼•ç”¨ç€æœ‰å…³å€¼åœ¨åºåˆ—é‡Œçš„ç¬¬ä¸€æ¬¡å‡ºç°çš„è¿­ä»£å™¨ï¼Œæˆ–è€…æ˜¯è¶…è¿‡ç»“æŸå¤„ä¸€ä¸ªä½ç½®çš„è¿­ä»£å™¨ã€‚ç°åœ¨è€ƒè™‘å¯¹ `count` çš„ç®€å•è°ƒç”¨ä¸­ä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µï¼š

```javascript
    void f()
    {
        string m = "Mary had a little lamb";
        int a_count = count(m, 'a');
    }
```

å¯¹ `find()` çš„ç¬¬ä¸€æ¬¡è°ƒç”¨å°†å‘ç° `Mary` é‡Œçš„ `'a'`ã€‚è¿™æ—¶è¿”å›çš„è¿­ä»£å™¨å°†æŒ‡å‘è¿™ä¸ªå­—ç¬¦ï¼Œå› è€Œä¸æ˜¯ `s.end()`ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±è¿›å…¥äº†å¾ªç¯ã€‚åœ¨å¾ªç¯ä¸­ï¼Œæˆ‘ä»¬åˆä» `i+1` å¼€å§‹æ£€ç´¢ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œä»æ‰€å‘ç°çš„ `'a'` ä¹‹åä¸€ä¸ªä½ç½®å¼€å§‹ã€‚éšåçš„å¾ªç¯å‘ç°äº†å¦å¤–ä¸‰ä¸ª `'a'`ã€‚å®Œæˆäº†æ‰€æœ‰è¿™äº›ä¹‹åï¼Œ`find()` åˆ°è¾¾äº†ç»“æŸå¤„å¹¶è¿”å› `s.end()`ï¼Œè¿™ä½¿æ¡ä»¶ `i!=s.end()` ä¸ºå‡ï¼Œå¹¶ä½¿å¾ªç¯é€€å‡ºã€‚

è¿™é‡Œå¯¹ `count()` çš„è°ƒç”¨å¯ä»¥ç”¨å›¾å½¢æ–¹å¼è¡¨ç¤ºå¦‚ä¸‹

![](/assets/3_8_1.png)

è¿™é‡Œçš„ç®­å¤´è¡¨ç¤ºçš„æ˜¯è¿­ä»£å™¨ `i` çš„åˆå§‹çš„ã€ä¸­é—´çš„å’Œæœ€åçš„ä½ç½®ã€‚

å¾ˆè‡ªç„¶ï¼Œç®—æ³• `find` å¯¹äºæ¯ä¸ªæ ‡å‡†å®¹å™¨çš„å·¥ä½œéƒ½å®Œå…¨ç›¸åŒã€‚æ ¹æ®è¿™ä¸ªæƒ…å†µï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŒ‰ç…§åŒæ ·çš„æ–¹å¼æ¨å¹¿ `count()` å‡½æ•°ï¼š

```javascript
    template<class C, class T> int count(const C& v, T val)
    {
        typename C::const_iterator i = find(v.begin(), v.end(), val);    //  "typename" å‚è§C.13.5èŠ‚
        int n = 0;
        while(i!=v.end())
        {
            ++n;
            ++i;    // è·³è¿‡åˆšåˆšå‘ç°çš„å…ƒç´ 
            i = find(i, v.end(), val);
        }
        return n;
    }
```

è¿™æ ·åšèƒ½è¡Œï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è¯´

```javascript
    void f(list<complex>& lc, vector<string>& vs, string s)
    {
        int i1 = count(lc, complex(1, 3));
        int i2 = count(vs, "Diogenes");
        int i3 = count(s, 'x');
    }
```

ä½†æ˜¯æˆ‘ä»¬å¹¶ä¸éœ€è¦å»å®šä¹‰ `count` æ¨¡æ¿ã€‚ç”±äºç»Ÿè®¡å‡ºå…ƒç´ çš„å‡ºç°æ¬¡æ•°æ˜¯å¦‚æ­¤å…·æœ‰ä¸€èˆ¬æ€§çš„æœ‰ç”¨åŠŸèƒ½ï¼Œæ ‡å‡†åº“æä¾›äº†è¿™ä¸ªç®—æ³•ã€‚ä¸ºäº†è¾¾åˆ°å®Œå…¨çš„é€šç”¨æ€§ï¼Œæ ‡å‡†åº“çš„countä»¥ä¸€ä¸ªåºåˆ—ä½œä¸ºå‚æ•°ï¼Œè€Œä¸æ˜¯ä»¥å®¹å™¨ä½œä¸ºå‚æ•°ï¼Œå› æ­¤æˆ‘ä»¬åº”è¯¥é‡‡ç”¨å¦‚ä¸‹çš„å†™æ³•ï¼š

```javascript
    void f(list<complex>& lc, vector<string>& vs, string s)
    {
        int i1 = count(lc.begin(), lc.end(), complex(1, 3));
        int i2 = count(vs.begin(), vs.end(), "Diogenes");
        int i3 = count(s.begin(), s.end(), 'x');

    }
```

é‡‡ç”¨åºåˆ—çš„å†™æ³•ï¼Œå°†ä½¿æˆ‘ä»¬ä¹Ÿèƒ½æŠŠcountç”¨äºå†…éƒ¨æ•°ç»„ï¼Œè¿˜å¯ä»¥å¯¹å®¹å™¨ä¸­çš„ä¸€éƒ¨åˆ†åšç»Ÿè®¡ã€‚ä¾‹å¦‚ï¼Œ

```javascript
    void g(char cs[], int sz)
    {
        int i1 = count(&cs[0], &cs[sz], 'z');    // æ•°ç»„ä¸­çš„'z'
        int i2 = count(&cs[0], &cs[sz/2], 'z');    // æ•°ç»„å‰ä¸€åŠä¸­çš„'z'
    }
```

ğŸ”š

