## è¿­ä»£å™¨å’ŒI/O

è¿­ä»£å™¨æ˜¯ä¸€ç§å¤„ç†ä½äºå®¹å™¨ä¸­çš„å…ƒç´ åºåˆ—çš„éå¸¸ä¸€èˆ¬è€Œåˆæå…¶æœ‰ç”¨çš„æ¦‚å¿µã€‚ä½†æ˜¯ï¼Œå®¹å™¨å¹¶ä¸æ˜¯æˆ‘ä»¬èƒ½å¤Ÿé‡åˆ°å…ƒç´ åºåˆ—çš„ä»…æœ‰çš„åœ°æ–¹ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªè¾“å…¥æµä¹Ÿèƒ½äº§ç”Ÿä¸€ä¸ªå€¼çš„åºåˆ—ï¼Œæˆ‘ä»¬ä¹Ÿä¼šæŠŠä¸€ä¸ªå€¼çš„åºåˆ—å†™è¿›ä¸€ä¸ªè¾“å‡ºæµä¸­ã€‚æ­£å› ä¸ºè¿™æ ·ï¼Œäººä»¬ä¹Ÿå°†è¿­ä»£å™¨çš„æ¦‚å¿µå¾ˆæœ‰æ•ˆåœ°åº”ç”¨åˆ°è¾“å…¥å’Œè¾“å‡ºä¸Šã€‚

è¦åšå‡ºä¸€ä¸ª `ostream_iterator`ï¼Œæˆ‘ä»¬éœ€è¦æè¿°è¢«ä½¿ç”¨çš„å°†æ˜¯å“ªä¸ªæµï¼Œè¿˜è¦æè¿°å†™å…¥å…¶ä¸­çš„å¯¹è±¡çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªå¼•ç”¨äº†æ ‡å‡†è¾“å‡ºæµ `cout` çš„è¿­ä»£å™¨ï¼š

```javascript
    ostream_iterator<string> oo(cout);       // #include <iterator>
                                             // #include <string>
```

ç»™ `*oo` èµ‹å€¼çš„æ•ˆæœå°±æ˜¯ä½¿è¢«èµ‹çš„å€¼é€åˆ° `cout`ã€‚ä¾‹å¦‚ï¼Œ

```javascript
    int main()
    {
        *oo = "Hello, ";     // æ„æ€æ˜¯cout << "Helo, "
        ++oo;
        *oo = "world!\n";    // æ„æ€æ˜¯cout << "world!\n"
    }
```

è¿™å°±å½¢æˆå¦ä¸€ç§å‘æ ‡å‡†è¾“å‡ºå†™è§„èŒƒä¿¡æ¯çš„æ–¹å¼ã€‚è¿™é‡Œ `++oo` çš„è®°æ³•æ˜¯æ¨¡ä»¿é€šè¿‡æŒ‡é’ˆå‘æ•°ç»„å†™å…¥çš„æ–¹å¼ã€‚å¯¹äºç®€å•çš„å·¥ä½œï¼Œè¿™ç§æ–¹å¼ä¸ä¼šæ˜¯æˆ‘çš„ç¬¬ä¸€é€‰æ‹©ã€‚ä½†æŠŠè¾“å‡ºå¤„ç†ä¸ºä¸€ç§åªèƒ½å†™å…¥çš„å®¹å™¨æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œæˆ‘ä»¬ä¸ä¹…å°±ä¼šçœ‹å¾—æ›´æ¸…æ¥š --- å¦‚æœç°åœ¨è¿˜æ²¡å®Œå…¨æ˜ç™½çš„è¯ã€‚

ä¸æ­¤ç±»ä¼¼ï¼Œä¸€ä¸ª `istream_iterator` å°±æ˜¯æŸç§ä¸œè¥¿ï¼Œå®ƒä½¿æˆ‘ä»¬å¯ä»¥åƒä»å®¹å™¨è¯»å‡ºä¸€æ ·ä»è¾“å…¥æµä¸­è¯»å‡ºã€‚åŒæ ·ï¼Œæˆ‘ä»¬å¿…é¡»æè¿°æ‰€ç”¨çš„è¾“å…¥æµå’Œæ‰€æœŸæœ›çš„å€¼çš„ç±»å‹ï¼š

```javascript
    istream_iterator<string> ii(cin);
```

ç”±äºè¾“å…¥è¿­ä»£å™¨æ€»æ˜¯æˆå¯¹å‡ºç°ï¼Œä»¥è¡¨ç¤ºä¸€ä¸ªåºåˆ—ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿå°±å¿…é¡»æä¾›å¦ä¸€ä¸ª `istream_iterator` å»è¡¨ç¤ºè¾“å…¥çš„ç»“æŸã€‚è¿™å°±æ˜¯é‚£ä¸ªé»˜è®¤çš„ `istream_iterator`ï¼š

```javascript
    istream_iterator<string> eos;
```

ç°åœ¨æˆ‘ä»¬å°±èƒ½ä»è¾“å…¥æµè¯»å…¥ `Hello,world!`ï¼Œè€Œåå†æ¬¡å°†å®ƒå†™å‡ºå»ï¼š

```javascript
    int main()
    {
        string s1 = *ii;
        ++ii;
        string s2 = *ii;
        cout << s1 << ' ' << s2 << '\n';
    }
```

å®é™…ä¸­ï¼Œ`istream_iterator` å’Œ `ostream_iterator` å¹¶ä¸æ˜¯æƒ³æä¾›äººä»¬ç›´æ¥ä½¿ç”¨çš„ï¼Œå®ƒä»¬ä¸»è¦æ˜¯ä¸ºäº†ç»™ç®—æ³•æä¾›å‚æ•°ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å†™å‡ºä¸€ä¸ªç®€å•ç¨‹åºï¼Œå®ƒè¯»å…¥ä¸€ä¸ªæ–‡ä»¶ï¼Œå¯¹æ‰€è¯»çš„ä¸œè¥¿æ’åºï¼Œå»æ‰é‡å¤ï¼Œæœ€åå°†ç»“æœå†™å…¥å¦ä¸€ä¸ªæ–‡ä»¶ï¼š

```javascript
    int main()
    {
        string from, to;
        cin >> from >> to;            // å–å¾—æºæ–‡ä»¶åå’Œç›®æ ‡æ–‡ä»¶å

        // #include <fstream>
        // ofstreamæ˜¯ä»å†…å­˜åˆ°ç¡¬ç›˜ï¼Œifstreamæ˜¯ä»ç¡¬ç›˜åˆ°å†…å­˜

        ifstream is(from.c_str());    // è¾“å…¥æµï¼ˆc_str(); è§3.5.1èŠ‚å’Œ20.3.7èŠ‚ï¼‰
        istream_iterator<string> ii(is);     // æµçš„è¾“å…¥è¿­ä»£å™¨
        istream_iterator<string> eos;        // è¾“å…¥çš„å“¨å…µ

        vector<string> b(ii, eos);           // bæ˜¯ä¸€ä¸ªå‘é‡ï¼Œç”¨è¾“å…¥è¿›è¡Œåˆå§‹åŒ–
        sort(b.begin(), b.end());            // å¯¹ç¼“å†²åŒºæ’åº   #include <algorithm>

        ofstream os(to.c_str());             // è¾“å‡ºæµ
        ostream_iterator<string> oo(os, "\n");    // æµçš„è¾“å‡ºè¿­ä»£å™¨

        // unique_copy(ii, eos, oo);
        unique_copy(b.begin(), b.end(), oo);      // ä»ç¼“å†²åŒºå¤åˆ¶åˆ°è¾“å‡º
                                                  // å¹¶å»æ‰é‡å¤çš„å€¼
        return !is.eof() || !os;                  // è¿”å›é”™è¯¯ä¿¡æ¯ï¼ˆ3.2èŠ‚ï¼Œ21.3.3èŠ‚ï¼‰
    }
```

`ifstream` å°±æ˜¯å¯ä»¥é™„ç€åˆ°æ–‡ä»¶ä¸Šçš„ `istream`ï¼Œ`ofstream` æ˜¯å¯ä»¥é™„ç€åˆ°æ–‡ä»¶ä¸Šçš„ `ostream`ã€‚`ostream_iterator` çš„ç¬¬äºŒä¸ªå‚æ•°ç”¨äºåˆ†éš”å„ä¸ªè¾“å‡ºå€¼ã€‚

ğŸ”š

