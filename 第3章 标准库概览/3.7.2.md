##范围检查

&emsp;&emsp;按照默认方式，标准库的vector并不提供对区间范围的检查。例如，

```javascript
    void f()
    {
        int i = phone_book[1001].number;    // 1001超出了区间范围
        // ...
    }
```

这个初始化很可能将某个随机的值赋给i，而不是给出一个错误。这当然不是人们所希望的，所以我在下面各章里要使用vector的一个经过简单修订的版本，它带有区间范围检查，称为Vec。一个Vec就像是一个vector，只是当某个下标超出了区间范围时，它将抛出一个类型为out_of_range的异常。

&emsp;&emsp;实现像Vec这样的类型以及有效地使用异常的技术将在11.12节、8.3节和第14章讨论。但无论如何，下面的定义对于本书中的所有例子都足够：

```javascript
    template<class T> class Vec : public vector<T>
    {
    public:
        Vec() : vector<T>() {}
        Vec(int s) : vector<T>(s) {}
        T& operator[] (int i) { return at(i); }            // 检查区间范围
        const T& operator[](int i) const { return at(i); } // 检查区间范围
    };
```

这里的at()操作是vector的下标操作，如果它的参数超过了该vector的区间范围，at()就会抛出一个out_of_range类型的异常。

&emsp;&emsp;现在回到保存名字和电话号码的问题。我们现在用一个Vec来保证所有超出范围的访问都将被抓住。例如，

```javascript
    Vec<Entry> phone_book(1000);
    void print_entry(int i)    // 简单地使用，完全像用vector
    {
        cout << phone_book[i].name << ' ' << phone_book[i].number << '\n';
    }
```