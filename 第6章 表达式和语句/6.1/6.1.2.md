##输入函数

&emsp;&emsp;读输入的部分通常都是程序里最麻烦的部分，这是因为程序必须与人交流，它必须处理人们的奇思怪想、各种习惯和看起来像是随机的错误。试图强求人按照某种更适合机器的方式活动通常被（正确地）认为是很令人讨厌的。低级输入例程的工作是读入字符，并由它们组合出高级的单词，这些单词随之成为高级例程的输入单位。在这里的低级输入由get_token()完成。写低级输入例程并不是每天都要做的工作，许多系统中提供了完成这些事情的标准函数。

&emsp;&emsp;我将分两个阶段完成get_token()。首先我将提供一个不太靠得住的简单版本，它给用户强加了很大负担。而后，我要把它决定需要去组合的哪种单词，而后返回表示被读单词的Token_value值。

&emsp;&emsp;初始化语句将第一个非空白字符读入ch，并检查该读入操作的成功完成：

```javascript
    Token_value get_token()
    {
        char ch = 0;
        cin >> ch;
        
        switch(ch)
        case 0:
            return curr_tok = END;        // 赋值和返回
    }
```

按默认方式，运算符 >> 将跳过空白（即空格、制表符、换行符等），如果操作失败还将保持ch不变。因此，ch==0的情况就表示了输入的结束。

&emsp;&emsp;赋值也是一个运算符，赋值表达式的结果就是赋给变量那个值。这使我能在同一个语句里将值END赋给curr_tok，并且返回它。在一个语句中做两件事对于维护很有帮助。如果赋值和返回在代码中分开做，程序员就可能会修改了一个而忘记另一个。

&emsp;&emsp;在考虑整个函数之前，让我们先分开来看一些情况。表达式结束符';'，括号和运算符的处理都很简单，只需要返回它们的值：

```javascript
    case ';':
    caes '*':
    case '/':
    case '+':
    case '-':
    case '(':
    case ')':
    case '=':
        return curr_tok = Token_value(ch);
```