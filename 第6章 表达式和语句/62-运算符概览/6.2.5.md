##增量和减量

&emsp;&emsp;++运算符用于直接表示增加，使人不必通过加和赋值的组合去间接地表示这个操作。根据定义，++lvalue的意思就是lvalue += 1，这又相当于 lvalue = lvalue + 1，条件是lvalue的求值没有副作用。指明被增加的那个对象的表达式只做一次求值。减量也类似地采用--运算符表示。运算符++和--都可以用做前缀或者后缀运算符。++x的值是（增量之后的）新值。例如，y=++x等价于y=(x+=1)。x++的值则是x原有的值。例如，y=x++等价于y=(t=x, x+=1, t)，这里的t是一个与x同类型的变量。

&emsp;&emsp;就像可以对指针做加和减一样，++和--也可以用到对数组元素进行操作的指针上；p++使p指向下一个元素（5.3.1节）。

&emsp;&emsp;运算符++和--对于在循环里增加或减少变量特别有用。例如，以0结尾的字符串可以通过下面方式复制：

```javascript
    void cpy(char* p, const char* q)
    {
        while(*p++ = *q++);
    }
```

和C一样，C++也因为允许这类紧凑的面向表达式的编码方式而受到喜爱或者仇恨。因为

    while(*p++ = *q++)
    
对于非C程序员而言是个小障碍，也因为以这种风格编写的代码在C和C++里绝非罕见，因此需要进一步仔细考察。

&emsp;&emsp;首先考虑一下更传统的复制一个字符数组的方式

```javascript
    int length = strlen(q);
    for(int i = 0; i <= length; i++) p[i] = q[i];
```

这确实很浪费。要确定以0结尾的字符串的长度，就需要通过读这个串去找到结尾的0。这样我们实际上就读了字符串两次：一次为确定其长度，另一次是复制。试试另一种方式：

```javascript
    int i;
    for(i = 0; q[i] != 0; i++) p[i] = q[i];
    p[i] = 0;        // 以0结束
```

用做下标的变量i可以去掉，因为p和q本身就是指针：

```javascript
    while(*q != 0)
    {
        *p = *q;
        p++;        // 指向下一个字符
        q++;        // 指向下一个字符
    }
    *p = 0;         // 以0结束
```

后增量运算符使我们可以先用变量的值，而后再增加它。我们可以将循环重新写出：

```javascript
    while(*q != 0)
    {
        *p++ = *q++;
    }
    *p = 0;          // 以0结束
```









